# ×ª×•×›× ×™×ª ×”×ª×××” ×œ×ª×™×§×•×Ÿ 13 ×œ×—×•×§ ×”×’× ×ª ×”×¤×¨×˜×™×•×ª - Giggsi Digital Menu

## ×ª××¨×™×š: 28/08/2025
## ×¡×˜×˜×•×¡: ×˜×™×•×˜×” ×¨××©×•× ×™×ª ×œ×‘×™×¦×•×¢

---

## ğŸ“‹ ×ª×•×›×Ÿ ×¢× ×™×™× ×™×
1. [×¡×§×™×¨×ª ××¦×‘ ×§×™×™×](#×¡×§×™×¨×ª-××¦×‘-×§×™×™×)
2. [×××¦××™× ×•×¡×™×›×•× ×™×](#×××¦××™×-×•×¡×™×›×•× ×™×)
3. [×ª×•×›× ×™×ª ×¤×¢×•×œ×” ××¤×•×¨×˜×ª](#×ª×•×›× ×™×ª-×¤×¢×•×œ×”-××¤×•×¨×˜×ª)
4. [×“×•×’×××•×ª ×§×•×“](#×“×•×’×××•×ª-×§×•×“)
5. [×œ×•×—×•×ª ×–×× ×™×](#×œ×•×—×•×ª-×–×× ×™×)

---

## ×¡×§×™×¨×ª ××¦×‘ ×§×™×™×

### ğŸ” × ×§×•×“×•×ª ××™×¡×•×£ ××™×“×¢ ×©×–×•×”×• ×‘×§×•×“

#### 1. **Google Tag Manager (GTM-MT8H76TR)**
- **××™×§×•×:** `index.html` (×©×•×¨×•×ª 11-17, 72-75)
- **×¡×˜×˜×•×¡:** ×¤×¢×™×œ ××•×˜×•××˜×™×ª ×‘×˜×¢×™× ×ª ×”×¢××•×“
- **××™×“×¢ × ××¡×£:** ×”×ª× ×”×’×•×ª ××©×ª××©×™×, ×“×¤×™× ×©× ×¦×¤×•, ××™×¨×•×¢×™×
- **×‘×¢×™×”:** ××™×Ÿ ×× ×’× ×•×Ÿ ×”×¡×›××” ×œ×¤× ×™ ×”×¤×¢×œ×”

#### 2. **Vercel Analytics**
- **××™×§×•×:** `src/components/common/Analytics.tsx`
- **×¡×˜×˜×•×¡:** ×¤×¢×™×œ ××•×˜×•××˜×™×ª
- **××™×“×¢ × ××¡×£:** ×‘×™×¦×•×¢×™×, ××™×§×•× ×’×™××•×’×¨×¤×™ ×›×œ×œ×™
- **×‘×¢×™×”:** ××™×Ÿ ××¤×©×¨×•×ª ×œ×¡×¨×‘

#### 3. **Supabase Authentication**
- **××™×§×•×:** `src/lib/supabase.ts`, `src/lib/auth.ts`
- **××™×“×¢ × ××¡×£:** ×›×ª×•×‘×•×ª ××™××™×™×œ ×•×¡×™×¡×××•×ª ×©×œ ×× ×”×œ×™×
- **×¡×˜×˜×•×¡:** ×¨×§ ×‘××–×•×¨ ×”× ×™×”×•×œ
- **×‘×¢×™×”:** ××™×Ÿ ××“×™× ×™×•×ª ×¤×¨×˜×™×•×ª ××• ×ª× ××™ ×©×™××•×©

#### 4. **Local Storage**
- **××™×§×•××™×:**
  - ×”×’×“×¨×•×ª ×©×¤×”: `src/i18n/index.ts`
  - ××—×¡×•×Ÿ ××™×“×¢ Supabase Auth
- **××™×“×¢ × ××¡×£:** ×”×¢×“×¤×•×ª ××©×ª××©, ×˜×•×§× ×™ ××™××•×ª
- **×‘×¢×™×”:** ××™×Ÿ ×”×•×“×¢×” ×œ××©×ª××© ×¢×œ ×©×™××•×© ×‘-Local Storage

#### 5. **×˜×¤×¡×™ × ×™×”×•×œ**
- **××™×§×•××™×:**
  - `src/pages/admin/LoginPage.tsx` - ×˜×•×¤×¡ ×”×ª×—×‘×¨×•×ª
  - `src/pages/admin/CategoriesPage.tsx` - × ×™×”×•×œ ×§×˜×’×•×¨×™×•×ª
  - `src/pages/admin/MenuItemsPage.tsx` - × ×™×”×•×œ ×¤×¨×™×˜×™×
- **××™×“×¢ × ××¡×£:** ××™×“×¢ ×¢×œ ×× ×”×œ×™×, ×ª××•× ×•×ª ××•×¦×¨×™×
- **×‘×¢×™×”:** ××™×Ÿ checkbox ×”×¡×›××”, ××™×Ÿ ××™×“×¢ ×¢×œ ×©××™×¨×ª ×”× ×ª×•× ×™×

---

## ×××¦××™× ×•×¡×™×›×•× ×™×

### ğŸš¨ ×¡×™×›×•× ×™× ×‘×¨××ª ×“×—×™×¤×•×ª ×’×‘×•×”×”

| ×§×•×‘×¥ | ×××¦× | ×”×©×œ×›×” ××©×¤×˜×™×ª |
|------|------|--------------|
| `index.html` | GTM ××•×¤×¢×œ ××•×˜×•××˜×™×ª | ×§× ×¡ ×¢×“ 3.2 ××™×œ×™×•×Ÿ â‚ª |
| `src/components/common/GoogleTagManager.tsx` | ××¢×§×‘ ××—×¨ × ×ª×™×‘×™× ×œ×œ× ×”×¡×›××” | ×”×¤×¨×ª ×¤×¨×˜×™×•×ª |
| `src/lib/supabase.ts` | ××™×Ÿ ×”×¦×”×¨×ª ×¤×¨×˜×™×•×ª ×‘×”×¨×©××” | ××™ ×¢××™×“×” ×‘×“×¨×™×©×ª ×©×§×™×¤×•×ª |

### âš ï¸ ×¡×™×›×•× ×™× ×‘×¨××ª ×“×—×™×¤×•×ª ×‘×™× ×•× ×™×ª

| ×§×•×‘×¥ | ×××¦× | ×”×©×œ×›×” |
|------|------|--------|
| `src/i18n/index.ts` | ×©××™×¨×ª ×”×¢×“×¤×•×ª ×œ×œ× ×™×™×“×•×¢ | ×—×•×¡×¨ ×©×§×™×¤×•×ª |
| `src/pages/admin/*` | ××™×Ÿ ×× ×’× ×•×Ÿ ××—×™×§×ª × ×ª×•× ×™× | ×”×¤×¨×ª ×–×›×•×ª ×œ××—×™×§×” |

### â„¹ï¸ ×¡×™×›×•× ×™× ×‘×¨××ª ×“×—×™×¤×•×ª × ××•×›×”

| ×§×•×‘×¥ | ×××¦× | ×”×©×œ×›×” |
|------|------|--------|
| `src/components/menu/*` | ××™×Ÿ ××™×“×¢ ×¢×œ cookie policy | ×—×•×¡×¨ ×©×§×™×¤×•×ª |

---

## ×ª×•×›× ×™×ª ×¤×¢×•×œ×” ××¤×•×¨×˜×ª

### ×©×œ×‘ 1: ×ª×©×ª×™×ª ×¤×¨×˜×™×•×ª (×—×•×‘×” ××™×™×“×™)

#### 1.1 ×™×¦×™×¨×ª ×¨×›×™×‘ Cookie Consent Banner

**×§×•×‘×¥ ×—×“×©:** `src/components/privacy/CookieConsent.tsx`

```typescript
import { useState, useEffect } from 'react'
import { useTranslation } from 'react-i18next'
import { Button } from '@/components/ui/button'
import { Card } from '@/components/ui/card'

export function CookieConsent() {
  const { t } = useTranslation()
  const [showBanner, setShowBanner] = useState(false)
  const [preferences, setPreferences] = useState({
    necessary: true, // Cannot be disabled
    analytics: false,
    marketing: false
  })

  useEffect(() => {
    const consent = localStorage.getItem('cookieConsent')
    if (!consent) {
      setShowBanner(true)
    } else {
      const savedPreferences = JSON.parse(consent)
      setPreferences(savedPreferences)
      applyPreferences(savedPreferences)
    }
  }, [])

  const applyPreferences = (prefs: typeof preferences) => {
    // Enable/disable GTM based on consent
    if (prefs.analytics || prefs.marketing) {
      window.dataLayer = window.dataLayer || []
      window.dataLayer.push({
        event: 'consent_update',
        analytics_storage: prefs.analytics ? 'granted' : 'denied',
        ad_storage: prefs.marketing ? 'granted' : 'denied'
      })
    }
    
    // Store consent
    localStorage.setItem('cookieConsent', JSON.stringify(prefs))
    localStorage.setItem('consentTimestamp', new Date().toISOString())
  }

  const acceptAll = () => {
    const newPrefs = { necessary: true, analytics: true, marketing: true }
    setPreferences(newPrefs)
    applyPreferences(newPrefs)
    setShowBanner(false)
  }

  const acceptSelected = () => {
    applyPreferences(preferences)
    setShowBanner(false)
  }

  const rejectAll = () => {
    const newPrefs = { necessary: true, analytics: false, marketing: false }
    setPreferences(newPrefs)
    applyPreferences(newPrefs)
    setShowBanner(false)
  }

  if (!showBanner) return null

  return (
    <div className="fixed bottom-0 left-0 right-0 z-50 p-4 bg-black/80 backdrop-blur">
      <Card className="max-w-4xl mx-auto p-6">
        <h3 className="text-xl font-bold mb-4">{t('privacy.cookieConsent.title')}</h3>
        <p className="mb-6">{t('privacy.cookieConsent.description')}</p>
        
        <div className="space-y-4 mb-6">
          <label className="flex items-center gap-3">
            <input
              type="checkbox"
              checked={preferences.necessary}
              disabled
              className="w-4 h-4"
            />
            <div>
              <span className="font-medium">{t('privacy.cookieConsent.necessary')}</span>
              <p className="text-sm text-gray-600">{t('privacy.cookieConsent.necessaryDesc')}</p>
            </div>
          </label>
          
          <label className="flex items-center gap-3">
            <input
              type="checkbox"
              checked={preferences.analytics}
              onChange={(e) => setPreferences({...preferences, analytics: e.target.checked})}
              className="w-4 h-4"
            />
            <div>
              <span className="font-medium">{t('privacy.cookieConsent.analytics')}</span>
              <p className="text-sm text-gray-600">{t('privacy.cookieConsent.analyticsDesc')}</p>
            </div>
          </label>
          
          <label className="flex items-center gap-3">
            <input
              type="checkbox"
              checked={preferences.marketing}
              onChange={(e) => setPreferences({...preferences, marketing: e.target.checked})}
              className="w-4 h-4"
            />
            <div>
              <span className="font-medium">{t('privacy.cookieConsent.marketing')}</span>
              <p className="text-sm text-gray-600">{t('privacy.cookieConsent.marketingDesc')}</p>
            </div>
          </label>
        </div>
        
        <div className="flex gap-3 justify-end">
          <Button variant="outline" onClick={rejectAll}>
            {t('privacy.cookieConsent.rejectAll')}
          </Button>
          <Button variant="outline" onClick={acceptSelected}>
            {t('privacy.cookieConsent.acceptSelected')}
          </Button>
          <Button onClick={acceptAll}>
            {t('privacy.cookieConsent.acceptAll')}
          </Button>
        </div>
      </Card>
    </div>
  )
}
```

#### 1.2 ×¢×“×›×•×Ÿ GoogleTagManager ×œ×”×ª× ×•×ª ×‘×”×¡×›××”

**×§×•×‘×¥ ×œ×¢×“×›×•×Ÿ:** `src/components/common/GoogleTagManager.tsx`

```typescript
import { useEffect } from 'react'
import { useLocation } from 'react-router-dom'

declare global {
  interface Window {
    dataLayer: any[]
    gtmEvent: (eventName: string, eventData?: any) => void
  }
}

export function GoogleTagManager() {
  const location = useLocation()

  useEffect(() => {
    // Check for consent before initializing
    const consent = localStorage.getItem('cookieConsent')
    if (!consent) return // Don't initialize if no consent
    
    const prefs = JSON.parse(consent)
    if (!prefs.analytics && !prefs.marketing) return // Don't initialize if both denied

    // Initialize dataLayer with consent state
    window.dataLayer = window.dataLayer || []
    window.dataLayer.push({
      'gtm.start': new Date().getTime(),
      event: 'gtm.js',
      'gtm.uniqueEventId': 0
    })
    
    // Set consent mode
    window.dataLayer.push({
      event: 'consent_default',
      analytics_storage: prefs.analytics ? 'granted' : 'denied',
      ad_storage: prefs.marketing ? 'granted' : 'denied',
      wait_for_update: 500
    })
  }, [])

  useEffect(() => {
    const consent = localStorage.getItem('cookieConsent')
    if (!consent) return
    
    const prefs = JSON.parse(consent)
    if (!prefs.analytics) return

    window.dataLayer = window.dataLayer || []
    window.dataLayer.push({
      event: 'pageview',
      page: {
        url: location.pathname,
        title: document.title
      }
    })
  }, [location])

  // Custom event helper
  useEffect(() => {
    window.gtmEvent = (eventName: string, eventData?: any) => {
      const consent = localStorage.getItem('cookieConsent')
      if (!consent) return
      
      const prefs = JSON.parse(consent)
      if (!prefs.analytics && !prefs.marketing) return
      
      window.dataLayer = window.dataLayer || []
      window.dataLayer.push({
        event: eventName,
        ...eventData
      })
    }
  }, [])

  return null
}
```

#### 1.3 ×™×¦×™×¨×ª ×“×£ ××“×™× ×™×•×ª ×¤×¨×˜×™×•×ª

**×§×•×‘×¥ ×—×“×©:** `src/pages/legal/PrivacyPolicy.tsx`

```typescript
import { useTranslation } from 'react-i18next'
import { Layout } from '@/components/common/Layout'

export function PrivacyPolicy() {
  const { t, i18n } = useTranslation()
  const isRTL = i18n.language === 'he' || i18n.language === 'ar'

  return (
    <Layout>
      <div className="container mx-auto px-4 py-8 max-w-4xl">
        <h1 className="text-3xl font-bold mb-8">{t('privacy.policy.title')}</h1>
        
        <div className={`prose ${isRTL ? 'prose-rtl' : ''} max-w-none`}>
          <section className="mb-8">
            <h2>{t('privacy.policy.introduction.title')}</h2>
            <p>{t('privacy.policy.introduction.content')}</p>
            <p>
              <strong>{t('privacy.policy.lastUpdated')}</strong>: {new Date().toLocaleDateString(i18n.language)}
            </p>
          </section>

          <section className="mb-8">
            <h2>{t('privacy.policy.dataController.title')}</h2>
            <p>
              Giggsi Sports Bar<br/>
              ×‘××¨ ×©×‘×¢, ×™×©×¨××œ<br/>
              ××™××™×™×œ: privacy@giggsi.com<br/>
              ×˜×œ×¤×•×Ÿ: 08-1234567
            </p>
          </section>

          <section className="mb-8">
            <h2>{t('privacy.policy.dataCollection.title')}</h2>
            <h3>{t('privacy.policy.dataCollection.types')}</h3>
            <ul>
              <li>{t('privacy.policy.dataCollection.analytics')}</li>
              <li>{t('privacy.policy.dataCollection.preferences')}</li>
              <li>{t('privacy.policy.dataCollection.adminData')}</li>
            </ul>
          </section>

          <section className="mb-8">
            <h2>{t('privacy.policy.purposes.title')}</h2>
            <ul>
              <li>{t('privacy.policy.purposes.service')}</li>
              <li>{t('privacy.policy.purposes.improvement')}</li>
              <li>{t('privacy.policy.purposes.legal')}</li>
            </ul>
          </section>

          <section className="mb-8">
            <h2>{t('privacy.policy.rights.title')}</h2>
            <ul>
              <li>{t('privacy.policy.rights.access')}</li>
              <li>{t('privacy.policy.rights.correction')}</li>
              <li>{t('privacy.policy.rights.deletion')}</li>
              <li>{t('privacy.policy.rights.portability')}</li>
              <li>{t('privacy.policy.rights.objection')}</li>
              <li>{t('privacy.policy.rights.withdrawal')}</li>
            </ul>
            <p>{t('privacy.policy.rights.howTo')}</p>
          </section>

          <section className="mb-8">
            <h2>{t('privacy.policy.cookies.title')}</h2>
            <h3>{t('privacy.policy.cookies.types')}</h3>
            <ul>
              <li>
                <strong>{t('privacy.policy.cookies.necessary')}</strong>
                <p>{t('privacy.policy.cookies.necessaryDesc')}</p>
              </li>
              <li>
                <strong>{t('privacy.policy.cookies.analytics')}</strong>
                <p>{t('privacy.policy.cookies.analyticsDesc')}</p>
              </li>
              <li>
                <strong>{t('privacy.policy.cookies.marketing')}</strong>
                <p>{t('privacy.policy.cookies.marketingDesc')}</p>
              </li>
            </ul>
          </section>

          <section className="mb-8">
            <h2>{t('privacy.policy.security.title')}</h2>
            <p>{t('privacy.policy.security.content')}</p>
          </section>

          <section className="mb-8">
            <h2>{t('privacy.policy.retention.title')}</h2>
            <p>{t('privacy.policy.retention.content')}</p>
          </section>

          <section className="mb-8">
            <h2>{t('privacy.policy.thirdParties.title')}</h2>
            <ul>
              <li>Google Analytics / Google Tag Manager</li>
              <li>Vercel Analytics</li>
              <li>Supabase (Database & Authentication)</li>
            </ul>
            <p>{t('privacy.policy.thirdParties.note')}</p>
          </section>

          <section className="mb-8">
            <h2>{t('privacy.policy.children.title')}</h2>
            <p>{t('privacy.policy.children.content')}</p>
          </section>

          <section className="mb-8">
            <h2>{t('privacy.policy.changes.title')}</h2>
            <p>{t('privacy.policy.changes.content')}</p>
          </section>

          <section className="mb-8">
            <h2>{t('privacy.policy.contact.title')}</h2>
            <p>{t('privacy.policy.contact.content')}</p>
            <p>
              ××™××™×™×œ: privacy@giggsi.com<br/>
              ×˜×œ×¤×•×Ÿ: 08-1234567<br/>
              ×›×ª×•×‘×ª: ×‘××¨ ×©×‘×¢, ×™×©×¨××œ
            </p>
          </section>
        </div>

        <div className="mt-12 p-4 bg-gray-100 rounded-lg">
          <p className="text-sm text-gray-600">
            {t('privacy.policy.compliance')}
          </p>
        </div>
      </div>
    </Layout>
  )
}
```

#### 1.4 ×¢×“×›×•×Ÿ ×ª×¨×’×•××™×

**×§×•×‘×¥ ×œ×¢×“×›×•×Ÿ:** `src/i18n/locales/he.json`

×”×•×¡×£ ××ª ×”×ª×¨×’×•××™× ×”×‘××™×:

```json
{
  "privacy": {
    "cookieConsent": {
      "title": "×”×’×“×¨×•×ª ×¤×¨×˜×™×•×ª ×•×¢×•×’×™×•×ª",
      "description": "×× ×• ××©×ª××©×™× ×‘×¢×•×’×™×•×ª ×›×“×™ ×œ×©×¤×¨ ××ª ×—×•×•×™×™×ª ×”××©×ª××© ×©×œ×š. ×× × ×‘×—×¨ ××ª ×”×¢×“×¤×•×ª×™×š:",
      "necessary": "×¢×•×’×™×•×ª ×”×›×¨×—×™×•×ª",
      "necessaryDesc": "× ×“×¨×©×•×ª ×œ×ª×¤×§×•×“ ×‘×¡×™×¡×™ ×©×œ ×”××ª×¨",
      "analytics": "×¢×•×’×™×•×ª ×× ×œ×™×˜×™×§×”",
      "analyticsDesc": "×¢×•×–×¨×•×ª ×œ× ×• ×œ×”×‘×™×Ÿ ×›×™×¦×“ ××©×ª××©×™× ×‘××ª×¨",
      "marketing": "×¢×•×’×™×•×ª ×©×™×•×•×§",
      "marketingDesc": "××©××©×•×ª ×œ×”×¦×’×ª ×ª×•×›×Ÿ ×©×™×•×•×§×™ ×¨×œ×•×•× ×˜×™",
      "acceptAll": "××©×¨ ×”×›×œ",
      "acceptSelected": "××©×¨ × ×‘×—×¨×™×",
      "rejectAll": "×“×—×” ×”×›×œ"
    },
    "policy": {
      "title": "××“×™× ×™×•×ª ×¤×¨×˜×™×•×ª",
      "lastUpdated": "×¢×“×›×•×Ÿ ××—×¨×•×Ÿ",
      "introduction": {
        "title": "××‘×•×",
        "content": "×‘-Giggsi Sports Bar, ×× ×• ××—×•×™×‘×™× ×œ×”×’×Ÿ ×¢×œ ×¤×¨×˜×™×•×ª×š. ××“×™× ×™×•×ª ×¤×¨×˜×™×•×ª ×–×• ××¡×‘×™×¨×” ×›×™×¦×“ ×× ×• ××•×¡×¤×™×, ××©×ª××©×™× ×•××’× ×™× ×¢×œ ×”××™×“×¢ ×©×œ×š ×‘×”×ª×× ×œ×ª×™×§×•×Ÿ 13 ×œ×—×•×§ ×”×’× ×ª ×”×¤×¨×˜×™×•×ª."
      },
      "dataController": {
        "title": "×‘×¢×œ ×”×©×œ×™×˜×” ×‘××™×“×¢"
      },
      "dataCollection": {
        "title": "××™×–×” ××™×“×¢ ×× ×• ××•×¡×¤×™×",
        "types": "×¡×•×’×™ ×”××™×“×¢ ×”× ××¡×£:",
        "analytics": "× ×ª×•× ×™ ×©×™××•×© ×•×× ×œ×™×˜×™×§×” (×¢××•×“×™× ×©× ×¦×¤×•, ×–×× ×™ ×‘×™×§×•×¨)",
        "preferences": "×”×¢×“×¤×•×ª ××©×ª××© (×©×¤×”, ×”×’×“×¨×•×ª ×ª×¦×•×’×”)",
        "adminData": "×¤×¨×˜×™ ×× ×”×œ×™× (××™××™×™×œ, ×¡×™×¡××”) - ×¨×§ ×‘××–×•×¨ ×”× ×™×”×•×œ"
      },
      "purposes": {
        "title": "××˜×¨×•×ª ×”×©×™××•×© ×‘××™×“×¢",
        "service": "××¡×¤×§×ª ×”×©×™×¨×•×ª ×•×”×ª×¤×¨×™×˜ ×”×“×™×’×™×˜×œ×™",
        "improvement": "×©×™×¤×•×¨ ×—×•×•×™×™×ª ×”××©×ª××© ×•×”××ª×¨",
        "legal": "×¢××™×“×” ×‘×“×¨×™×©×•×ª ×—×•×§×™×•×ª"
      },
      "rights": {
        "title": "×–×›×•×™×•×ª×™×š",
        "access": "×–×›×•×ª ×œ×¢×™×•×Ÿ ×‘××™×“×¢ ×©×œ×š",
        "correction": "×–×›×•×ª ×œ×ª×™×§×•×Ÿ ××™×“×¢ ×©×’×•×™",
        "deletion": "×–×›×•×ª ×œ××—×™×§×ª ××™×“×¢",
        "portability": "×–×›×•×ª ×œ× ×™×™×“×•×ª ××™×“×¢",
        "objection": "×–×›×•×ª ×œ×”×ª× ×’×“ ×œ×¢×™×‘×•×“",
        "withdrawal": "×–×›×•×ª ×œ×‘×™×˜×•×œ ×”×¡×›××”",
        "howTo": "×œ×××© ×–×›×•×™×•×ª×™×š, ×¦×•×¨ ×§×©×¨ ×¢×× ×• ×‘×¤×¨×˜×™× ×”××•×¤×™×¢×™× ×œ××˜×”."
      },
      "cookies": {
        "title": "×©×™××•×© ×‘×¢×•×’×™×•×ª",
        "types": "×¡×•×’×™ ×¢×•×’×™×•×ª:",
        "necessary": "×¢×•×’×™×•×ª ×”×›×¨×—×™×•×ª",
        "necessaryDesc": "× ×“×¨×©×•×ª ×œ×ª×¤×§×•×“ ×‘×¡×™×¡×™ ×©×œ ×”××ª×¨ ×•××™× ×Ÿ × ×™×ª× ×•×ª ×œ×‘×™×˜×•×œ",
        "analytics": "×¢×•×’×™×•×ª ×× ×œ×™×˜×™×§×”",
        "analyticsDesc": "×××¤×©×¨×•×ª ×œ× ×• ×œ×”×‘×™×Ÿ ×›×™×¦×“ ××©×ª××©×™× ×‘××ª×¨ ×•×œ×©×¤×¨ ××•×ª×•",
        "marketing": "×¢×•×’×™×•×ª ×©×™×•×•×§",
        "marketingDesc": "××©××©×•×ª ×œ×”×ª×××ª ×ª×•×›×Ÿ ×©×™×•×•×§×™"
      },
      "security": {
        "title": "××‘×˜×—×ª ××™×“×¢",
        "content": "×× ×• × ×•×§×˜×™× ×‘×××¦×¢×™ ××‘×˜×—×” ×˜×›× ×™×™× ×•××¨×’×•× ×™×™× ××ª××™××™× ×›×“×™ ×œ×”×’×Ÿ ×¢×œ ×”××™×“×¢ ×©×œ×š ××¤× ×™ ×’×™×©×” ×‘×œ×ª×™ ××•×¨×©×™×ª, ×©×™× ×•×™, ×’×™×œ×•×™ ××• ×”×©××“×”."
      },
      "retention": {
        "title": "×ª×§×•×¤×ª ×©××™×¨×ª ××™×“×¢",
        "content": "×× ×• ×©×•××¨×™× ××ª ×”××™×“×¢ ×©×œ×š ×¨×§ ×›×œ ×¢×•×“ × ×“×¨×© ×œ××˜×¨×•×ª ×©×œ×©××Ÿ × ××¡×£ ××• ×›× ×“×¨×© ×¢×œ ×¤×™ ×—×•×§."
      },
      "thirdParties": {
        "title": "×©×™×ª×•×£ ××™×“×¢ ×¢× ×¦×“×“×™× ×©×œ×™×©×™×™×",
        "note": "××™× × ×• ××•×›×¨×™× ××• ××©×ª×¤×™× ××ª ×”××™×“×¢ ×”××™×©×™ ×©×œ×š ×¢× ×¦×“×“×™× ×©×œ×™×©×™×™× ×œ××˜×¨×•×ª ×©×™×•×•×§."
      },
      "children": {
        "title": "×¤×¨×˜×™×•×ª ×™×œ×“×™×",
        "content": "×”××ª×¨ ×©×œ× ×• ××™× ×• ××™×•×¢×“ ×œ×™×œ×“×™× ××ª×—×ª ×œ×’×™×œ 13. ××™× × ×• ××•×¡×¤×™× ×‘×™×•×“×¢×™×Ÿ ××™×“×¢ ××™×©×™ ××™×œ×“×™×."
      },
      "changes": {
        "title": "×©×™× ×•×™×™× ×‘××“×™× ×™×•×ª",
        "content": "×× ×• ×¢×©×•×™×™× ×œ×¢×“×›×Ÿ ××“×™× ×™×•×ª ×–×• ××¢×ª ×œ×¢×ª. × ×•×“×™×¢ ×¢×œ ×©×™× ×•×™×™× ××”×•×ª×™×™× ×‘×××¦×¢×•×ª ×”××ª×¨."
      },
      "contact": {
        "title": "×¦×•×¨ ×§×©×¨",
        "content": "×œ×©××œ×•×ª ×‘× ×•×©× ××“×™× ×™×•×ª ×”×¤×¨×˜×™×•×ª ××• ×œ×××© ××ª ×–×›×•×™×•×ª×™×š, ×× × ×¤× ×” ××œ×™× ×•:"
      },
      "compliance": "××“×™× ×™×•×ª ×–×• ×ª×•×××ª ×œ×ª×™×§×•×Ÿ 13 ×œ×—×•×§ ×”×’× ×ª ×”×¤×¨×˜×™×•×ª (×”×ª×©×¢\"×—-2017) ×•×œ-GDPR ×”××™×¨×•×¤×™."
    }
  }
}
```

### ×©×œ×‘ 2: ×¢×“×›×•×Ÿ × ×ª×™×‘×™× ×•× ×™×•×•×˜

**×§×•×‘×¥ ×œ×¢×“×›×•×Ÿ:** `src/App.tsx`

×”×•×¡×£ × ×ª×™×‘×™× ×—×“×©×™×:

```typescript
import { PrivacyPolicy } from '@/pages/legal/PrivacyPolicy'
import { TermsOfService } from '@/pages/legal/TermsOfService'
import { CookieConsent } from '@/components/privacy/CookieConsent'

// ×‘×ª×•×š ×”×¨×›×™×‘ App, ××—×¨×™ ×”-Router:
<Router>
  <Routes>
    {/* ... existing routes ... */}
    <Route path="/privacy" element={<PrivacyPolicy />} />
    <Route path="/terms" element={<TermsOfService />} />
  </Routes>
  <Analytics />
  <CookieConsent />
</Router>
```

### ×©×œ×‘ 3: ×¢×“×›×•×Ÿ Footer ×¢× ×§×™×©×•×¨×™× ×œ××“×™× ×™×•×ª

**×§×•×‘×¥ ×œ×¢×“×›×•×Ÿ:** `src/components/common/Layout.tsx`

×”×•×¡×£ footer ×¢× ×§×™×©×•×¨×™×:

```typescript
// ×‘×ª×•×š ×¨×›×™×‘ Layout, ×”×•×¡×£ footer:
<footer className="mt-auto py-8 border-t border-gray-800">
  <div className="container mx-auto px-4">
    <div className="flex flex-wrap justify-center gap-6 text-sm">
      <Link to="/privacy" className="hover:text-giggsi-gold">
        {t('footer.privacy')}
      </Link>
      <Link to="/terms" className="hover:text-giggsi-gold">
        {t('footer.terms')}
      </Link>
      <Link to="/contact" className="hover:text-giggsi-gold">
        {t('footer.contact')}
      </Link>
      <button 
        onClick={() => setShowCookieSettings(true)}
        className="hover:text-giggsi-gold"
      >
        {t('footer.cookieSettings')}
      </button>
    </div>
    <div className="text-center mt-4 text-xs text-gray-600">
      Â© {new Date().getFullYear()} Giggsi Sports Bar. {t('footer.allRights')}
    </div>
  </div>
</footer>
```

### ×©×œ×‘ 4: ×”×•×¡×¤×ª ×”×¡×›××” ×‘×˜×¤×¡×™ ×”× ×™×”×•×œ

**×§×•×‘×¥ ×œ×¢×“×›×•×Ÿ:** `src/pages/admin/LoginPage.tsx`

×”×•×¡×£ checkbox ×”×¡×›××”:

```typescript
// ×‘×ª×•×š ×˜×•×¤×¡ ×”×”×ª×—×‘×¨×•×ª, ×œ×¤× ×™ ×›×¤×ª×•×¨ ×”×©×œ×™×—×”:
<div className="flex items-start gap-2 mb-4">
  <input
    type="checkbox"
    id="privacy-consent"
    required
    className="mt-1"
  />
  <label htmlFor="privacy-consent" className="text-sm">
    {t('admin.login.consent')} 
    <Link to="/privacy" className="text-blue-500 hover:underline" target="_blank">
      {t('admin.login.privacyPolicy')}
    </Link>
  </label>
</div>
```

### ×©×œ×‘ 5: ×™×¦×™×¨×ª ×× ×’× ×•×Ÿ ××—×™×§×ª × ×ª×•× ×™× ×œ×× ×”×œ×™×

**×§×•×‘×¥ ×—×“×©:** `src/components/admin/DataManagement.tsx`

```typescript
import { useState } from 'react'
import { supabase } from '@/lib/supabase'
import { Button } from '@/components/ui/button'
import { Alert, AlertDescription } from '@/components/ui/alert'

export function DataManagement() {
  const [loading, setLoading] = useState(false)
  const [message, setMessage] = useState('')

  const exportUserData = async () => {
    setLoading(true)
    try {
      const { data: { user } } = await supabase.auth.getUser()
      if (!user) throw new Error('No user logged in')
      
      // Fetch all user data
      const userData = {
        profile: user,
        timestamp: new Date().toISOString()
      }
      
      // Download as JSON
      const blob = new Blob([JSON.stringify(userData, null, 2)], { type: 'application/json' })
      const url = URL.createObjectURL(blob)
      const a = document.createElement('a')
      a.href = url
      a.download = `user-data-${user.id}.json`
      a.click()
      
      setMessage('×”× ×ª×•× ×™× ×©×œ×š ×”×•×¨×“×• ×‘×”×¦×œ×—×”')
    } catch (error) {
      setMessage('×©×’×™××” ×‘×™×™×¦×•× ×”× ×ª×•× ×™×')
    } finally {
      setLoading(false)
    }
  }

  const requestDataDeletion = async () => {
    if (!confirm('×”×× ××ª×” ×‘×˜×•×—? ×¤×¢×•×œ×” ×–×• ×‘×œ×ª×™ ×”×¤×™×›×”.')) return
    
    setLoading(true)
    try {
      // Log deletion request
      console.log('Data deletion requested at:', new Date().toISOString())
      
      // In production, this should trigger a deletion workflow
      setMessage('×‘×§×©×ª ×”××—×™×§×” × ×©×œ×—×”. × ×˜×¤×œ ×‘×” ×ª×•×š 30 ×™××™×.')
    } catch (error) {
      setMessage('×©×’×™××” ×‘×©×œ×™×—×ª ×‘×§×©×ª ×”××—×™×§×”')
    } finally {
      setLoading(false)
    }
  }

  return (
    <div className="space-y-6">
      <h3 className="text-xl font-bold">× ×™×”×•×œ × ×ª×•× ×™× ××™×©×™×™×</h3>
      
      {message && (
        <Alert>
          <AlertDescription>{message}</AlertDescription>
        </Alert>
      )}
      
      <div className="space-y-4">
        <div>
          <h4 className="font-medium mb-2">×™×™×¦×•× ×”× ×ª×•× ×™× ×©×œ×š</h4>
          <p className="text-sm text-gray-600 mb-3">
            ×”×•×¨×“ ×”×¢×ª×§ ×©×œ ×›×œ ×”××™×“×¢ ×”××™×©×™ ×©×œ×š
          </p>
          <Button 
            onClick={exportUserData} 
            disabled={loading}
            variant="outline"
          >
            ×™×™×¦× ××ª ×”× ×ª×•× ×™× ×©×œ×™
          </Button>
        </div>
        
        <div>
          <h4 className="font-medium mb-2">××—×™×§×ª ×—×©×‘×•×Ÿ</h4>
          <p className="text-sm text-gray-600 mb-3">
            ×‘×§×© ×œ××—×•×§ ××ª ×—×©×‘×•× ×š ×•×›×œ ×”× ×ª×•× ×™× ×”×§×©×•×¨×™×
          </p>
          <Button 
            onClick={requestDataDeletion} 
            disabled={loading}
            variant="destructive"
          >
            ××—×§ ××ª ×”×—×©×‘×•×Ÿ ×©×œ×™
          </Button>
        </div>
      </div>
    </div>
  )
}
```

### ×©×œ×‘ 6: ×¢×“×›×•×Ÿ ×¡×›××ª ××¡×“ ×”× ×ª×•× ×™×

**×§×•×‘×¥ ×—×“×©:** `supabase/migrations/003_privacy_compliance.sql`

```sql
-- Create privacy consent tracking table
CREATE TABLE IF NOT EXISTS privacy_consents (
  id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
  user_id UUID REFERENCES auth.users(id) ON DELETE CASCADE,
  consent_type TEXT NOT NULL, -- 'cookies', 'terms', 'privacy'
  granted BOOLEAN NOT NULL DEFAULT false,
  ip_address INET,
  user_agent TEXT,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- Create data deletion requests table
CREATE TABLE IF NOT EXISTS data_deletion_requests (
  id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
  user_id UUID REFERENCES auth.users(id) ON DELETE SET NULL,
  email TEXT NOT NULL,
  reason TEXT,
  status TEXT DEFAULT 'pending', -- 'pending', 'processing', 'completed'
  requested_at TIMESTAMPTZ DEFAULT NOW(),
  completed_at TIMESTAMPTZ
);

-- Add privacy fields to existing tables
ALTER TABLE auth.users 
ADD COLUMN IF NOT EXISTS privacy_consent_at TIMESTAMPTZ,
ADD COLUMN IF NOT EXISTS terms_accepted_at TIMESTAMPTZ;

-- Create audit log for sensitive operations
CREATE TABLE IF NOT EXISTS privacy_audit_log (
  id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
  user_id UUID REFERENCES auth.users(id) ON DELETE SET NULL,
  action TEXT NOT NULL, -- 'data_export', 'data_deletion', 'consent_update'
  details JSONB,
  ip_address INET,
  created_at TIMESTAMPTZ DEFAULT NOW()
);

-- RLS Policies
ALTER TABLE privacy_consents ENABLE ROW LEVEL SECURITY;
ALTER TABLE data_deletion_requests ENABLE ROW LEVEL SECURITY;
ALTER TABLE privacy_audit_log ENABLE ROW LEVEL SECURITY;

-- Users can only see their own consent records
CREATE POLICY "Users can view own consents" ON privacy_consents
  FOR SELECT USING (auth.uid() = user_id);

CREATE POLICY "Users can update own consents" ON privacy_consents
  FOR UPDATE USING (auth.uid() = user_id);

-- Only admins can view deletion requests
CREATE POLICY "Admins can view deletion requests" ON data_deletion_requests
  FOR ALL USING (
    auth.uid() IN (
      SELECT user_id FROM auth.users 
      WHERE raw_user_meta_data->>'role' = 'admin'
    )
  );

-- Users can create their own deletion requests
CREATE POLICY "Users can request deletion" ON data_deletion_requests
  FOR INSERT WITH CHECK (auth.uid() = user_id);
```

---

## ×“×•×’×××•×ª ×§×•×“

### ×“×•×’××” 1: ×”×ª× ×™×™×” ×©×œ GTM ×‘×”×¡×›××”

```javascript
// Before (×‘×¢×™×™×ª×™):
window.dataLayer.push({'event': 'purchase'})

// After (×ª×§×™×Ÿ):
if (window.gtmEvent) {
  window.gtmEvent('purchase', {
    value: 100,
    currency: 'ILS'
  })
}
```

### ×“×•×’××” 2: ××™××•×ª ×”×¡×›××” ×œ×¤× ×™ ×©××™×¨×ª × ×ª×•× ×™×

```typescript
// ×‘×›×œ ×˜×•×¤×¡ ×©××•×¡×£ × ×ª×•× ×™×:
const handleSubmit = async (data: FormData) => {
  // Check for consent
  const consent = localStorage.getItem('privacyConsent')
  if (!consent) {
    alert('Please accept our privacy policy first')
    return
  }
  
  // Log the consent
  await supabase.from('privacy_audit_log').insert({
    user_id: user?.id,
    action: 'form_submission',
    details: { form: 'contact', timestamp: new Date() }
  })
  
  // Continue with form submission
  // ...
}
```

---

## ×œ×•×—×•×ª ×–×× ×™×

### ×©×‘×•×¢ 1-2: ×ª×©×ª×™×ª ×‘×¡×™×¡×™×ª (×“×—×•×£!)
- [ ] ×”×˜××¢×ª Cookie Consent Banner
- [ ] ×¢×“×›×•×Ÿ GTM ×œ×”×ª× ×•×ª ×‘×”×¡×›××”
- [ ] ×™×¦×™×¨×ª ×“×¤×™ ××“×™× ×™×•×ª ×¤×¨×˜×™×•×ª ×•×ª× ××™ ×©×™××•×©

### ×©×‘×•×¢ 3-4: ×”×©×œ××•×ª ×•×‘×“×™×§×•×ª
- [ ] ×”×•×¡×¤×ª ×× ×’× ×•× ×™ ××—×™×§×ª × ×ª×•× ×™×
- [ ] ×¢×“×›×•×Ÿ ×›×œ ×”×˜×¤×¡×™× ×¢× checkboxes
- [ ] ×‘×“×™×§×•×ª ××§×™×¤×•×ª

### ×©×‘×•×¢ 5: ×ª×™×¢×•×“ ×•×¡×™×•×
- [ ] ×ª×™×¢×•×“ ×›×œ ×”×ª×”×œ×™×›×™×
- [ ] ×”×“×¨×›×ª ×¦×•×•×ª
- [ ] ×‘×“×™×§×” ×¡×•×¤×™×ª

---

## ×¡×™×›×•×

×ª×•×›× ×™×ª ×–×• ××›×¡×” ××ª ×›×œ ×”×“×¨×™×©×•×ª ×©×œ ×ª×™×§×•×Ÿ 13 ×œ×—×•×§ ×”×’× ×ª ×”×¤×¨×˜×™×•×ª:

âœ… **×©×§×™×¤×•×ª** - ××“×™× ×™×•×ª ×¤×¨×˜×™×•×ª ××¤×•×¨×˜×ª ×•× ×’×™×©×”  
âœ… **×”×¡×›××”** - ×× ×’× ×•×Ÿ ×”×¡×›××” ×‘×¨×•×¨ ×œ×¤× ×™ ××™×¡×•×£ × ×ª×•× ×™×  
âœ… **×–×›×•×™×•×ª ××©×ª××©×™×** - ××¤×©×¨×•×ª ×œ×™×™×¦×•× ×•××—×™×§×ª × ×ª×•× ×™×  
âœ… **××‘×˜×—×”** - ×”×¦×¤× ×” ×•××‘×˜×—×ª × ×ª×•× ×™×  
âœ… **×“×™×•×•×—×™×•×ª** - ×ª×™×¢×•×“ ×•××¢×§×‘ ××—×¨ ×¤×¢×•×œ×•×ª  

---

## × ×¡×¤×—×™×

### × ×¡×¤×— ×': ×¨×©×™××ª ×ª×™×•×’ ×œ×‘×“×™×§×ª ×ª××™××•×ª

- [ ] Cookie consent banner ××•×¦×’ ×‘×˜×¢×™× ×” ×¨××©×•× ×”
- [ ] GTM ×œ× × ×˜×¢×Ÿ ×œ×œ× ×”×¡×›××”
- [ ] ××“×™× ×™×•×ª ×¤×¨×˜×™×•×ª × ×’×™×©×” ××›×œ ×¢××•×“
- [ ] ×›×œ ×”×˜×¤×¡×™× ×›×•×œ×œ×™× checkbox ×”×¡×›××”
- [ ] ××¤×©×¨×•×ª ××—×™×§×ª × ×ª×•× ×™× ×–××™× ×”
- [ ] ×™×™×¦×•× × ×ª×•× ×™× ×¢×•×‘×“
- [ ] ×ª×™×¢×•×“ ×”×¡×›××•×ª × ×©××¨ ×‘××¡×“ ×”× ×ª×•× ×™×

### × ×¡×¤×— ×‘': ××©××‘×™× × ×•×¡×¤×™×

- [×ª×™×§×•×Ÿ 13 ×œ×—×•×§ ×”×’× ×ª ×”×¤×¨×˜×™×•×ª](https://www.gov.il/he/departments/legalInfo/data_protection_law)
- [GDPR Compliance Checklist](https://gdpr.eu/checklist/)
- [Google Consent Mode](https://support.google.com/analytics/answer/9976101)

---

*××¡××š ×–×” ×”×•×›×Ÿ ×œ×¦×•×¨×š ×™×™×©×•× ×ª×™×§×•×Ÿ 13 ×œ×—×•×§ ×”×’× ×ª ×”×¤×¨×˜×™×•×ª ×‘××ª×¨ Giggsi Digital Menu*  
*×ª××¨×™×š ×¢×“×›×•×Ÿ ××—×¨×•×Ÿ: 28/08/2025*